<script>
var environmentModel;
var existingEnvironments = {{{toJSON existingEnvironments}}}
var selectedEnvironmentData = '{{selectedEnvironment}}'
</script>
<section class="Main"  >
  <div class="Margins" style="min-height: 300px;">
    <div class="Bar Bar-header" style="width:100%;">
      <h4 class="Bar-title Bar-item">Select what options to install</h4>
      <div class="Bar-item Bar-item--right ">
        <button type="submit" class="Btn Btn--primary">Next</button>
      </div>
    </div>
    <div class="Paper kss-paper" style="margin:0px;">
      <div class="Grid">
        <div class="Grid-column-4" id="mainView">
          <div id="live_or_existing_div">
            <h2>New or existing installation?</h2>
            <a href="#" id="new_environment_button" class="Btn Btn--neutral">New environment</a>
            <a href="#" id="existing_environment_button" class="Btn Btn--neutral">Existing environment</a>
          </div>

          <div id="new_environment_div" style="display:none;">
            <h1>New environment</h1>
            Select one of the templates below to proceed
            <div class="Grid">
              {{#each environments}}
              <div class="Grid-column-3">
                <div class="Rounded-box new_environment_select" id="{{name}}"style="margin:0px;">
                  <h2>{{name}}</h2>
                  {{description}}
                </div>
              </div>
              {{/each}}
            </div>
          </div>

          <div id="existing_environment_div" style="display:none;">
            <h1>Existing environment</h1>
            <div class="Grid">
              {{#each existingEnvironments}}
              <div class="Grid-column-3">
                <div class="Rounded-box existing_environment_select" id="{{name}}" style="margin:0px;">
                  <h2>{{name}}</h2>
                </div>
              </div>
              {{/each}}
            </div>
          </div>

          <div id="environment_name" style="display:none;">
            <div class="Formrow Formrow--noLabel">
              <label class="Formrow-label" for="name">Name</label>
              <div class="Formrow-offset">
                <input id="environment_name_input" type="text" placeholder="Name" value="My Atomia"/>
                <span class="Message Message--info Message--small">The name of your new environment</span>
              </div>
            </div>
            <button type="submit" class="Btn Btn--primary" id="create_environment_button">Create environment</button>
          </div>

          <div id="customization" style="display:none;">
            <h1>Customization options</h1>

            <div data-bind="template: {name: 'environment-template', foreach: environmentModel}"></div>
          </div>
          <script id="environment-template" type="text/html">

            <div class="Rounded-box">
              <h4 data-bind="text: category"></h4>
              <label class="Switch" style="float:right;position:relative;top:-30px;right:30px;">
                <input class="Switch-input" data-bind="checked: selected" type="checkbox">
                <span class="Switch-click" data-on="Yes" data-off="No"></span>
              </label>
            </div>

            <div data-bind="foreach: members">
              <div data-bind="ifnot: required">

                <div class="Rounded-box Child-box">
                  <h4 data-bind="text: name"></h4>
                  <p data-bind="text: description"></p>
                  <label class="Switch" style="float:right;position:relative;top:-30px;right:30px;">
                    <input class="Switch-input" data-bind="checked: selected" type="checkbox">
                    <span class="Switch-click" data-on="Yes" data-off="No"></span>
                  </label>
                  <div data-bind="if: multiple">
                    test
                  </div>
                </div>

              </div>
            </div>

          </script>

        </div>
        <div class="Grid-column-2" id="requirements" style="display:none;">
          <h4>Requirements</h4>
          <p><strong>For this installation you will need:</strong></p>
          <div id="counterView">
            <p data-bind="if: countServers('windows')">
              <span data-bind="text: countServers('windows')" ></span> Machines<br/>
              Windows Server 2012
            </p>
            <p data-bind="if: countServers('ubuntu')">
              <span data-bind="text: countServers('ubuntu')" ></span> Machines<br/>
              Ubuntu 16.04
            </p>
            <p data-bind="if: countServers('openstack')">
              Existing OpenStack installation
            </p>
            <p>
              <button class="Btn Btn--neutral Btn--small" id="viewRequirementsButton">
                View requirements list
              </button>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
